# 配置版本，请勿修改
version: 3.2.0

# CloudFlare Workers AI 配置
cloudflare:
  # CloudFlare Workers AI API 密钥，FancyHelper会自动根据密钥来获取对应的account-id
  cf_key: "maF_cBg4UXnWgTaE8t8tdAq-iGZ5osv6CHxm2nH0"
  # 使用的模型名称，不推荐更改，可以是任何一个Text-Generation模型，默认gpt-oss-120b（最聪明）
  model: "@cf/openai/gpt-oss-120b"

# OpenAI 兼容 API 配置（支持自定义 OpenAI 接口）
openai:
  # 是否启用 OpenAI 模式（启用后将优先使用此配置）
  enabled: false
  # OpenAI API 地址（支持自定义地址，如 OpenAI 官方、Azure OpenAI、本地模型等）
  # 示例：
  #   - OpenAI 官方: https://api.openai.com/v1/chat/completions
  #   - DeepSeek: https://api.deepseek.com/chat/completions
  #   - Ollama (本地): http://localhost:11434/v1/chat/completions
  #   - 阿里云通义千问: https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
  #   - 其他兼容 OpenAI 格式的 API
  api_url: https://api.openai.com/v1/chat/completions
  # OpenAI API 密钥
  api_key: your-openai-api-key
  # 使用的模型名称
  # 示例：
  #   - OpenAI: gpt-4o, gpt-4o-mini, o1-preview, o1-mini
  #   - DeepSeek: deepseek-chat, deepseek-reasoner
  #   - Ollama: llama3, mistral
  #   - 阿里云通义千问: qwen-plus
  model: gpt-4o

# 插件设置
settings:
  # 是否启用调试模式，启用后会在控制台输出详细调试信息
  debug: false
  # CLI 模式会话的自动过期时间 （以分钟为单位）
  timeout_minutes: 10
  # AI API 请求超时时间（以秒为单位）
  # 对于推理模型（如 gpt-oss-120b、deepseek-reasoner、o1 等），建议设置为 120-300 秒
  # 对于普通模型（如 gpt-4o、gpt-4o-mini），建议设置为 60-120 秒
  api_timeout_seconds: 120
  # Token（字符数）剩余警告阈值
  token_warning_threshold: 100
  # 是否启用匿名错误上报，帮助开发者改进插件
  auto_report: true  
  # 是否启用自动更新检查
  check_update: true  
  # 是否在管理员进入服务器时提示更新
  op_update_notify: true 
  # 是否在检测到新版本时自动下载并安装更新
  auto_upgrade: true  
  # GitHub 镜像源，用于加速下载
  update_mirror: "https://ghproxy.net/"  
  # 自动检测重复工具调用 (防止 AI 陷入死循环)
  anti_loop:
    # 连续多少次相似调用触发中断
    threshold_count: 4
    # 相似度阈值 (0.0 - 1.0)，建议 0.95
    similarity_threshold: 0.95
    # 单次对话中连续调用工具的最大次数 (防止 AI 陷入逻辑循环或过度消耗)
    max_chain_count: 30
  # YOLO 模式下需要手动确认的风险命令列表（匹配前缀）
  yolo_risk_commands:
    - op
    - deop
    - stop
    - reload
    - restart
    - kill
    - nbt
    - ban

# 公告配置
notice:
  # 玩家加入时是否显示插件公告（需要 FancyHelper.notice 权限）
  show_on_join: true